---
title: Multistream
description: Start multistreaming
---

# Overview

The Multistream API allows a source stream and transcoded renditions to be
pushed to multiple RTMP or SRT targets, such as Facebook Live, Twitch, and
Youtube Live.

# Managing Multistream targets in the Livepeer.com Dashboard

To add, manage, and delete multistream targets, navigate to the Streams page
([livepeer.com/dashboard/streams](http://livepeer.com/dashboard/streams)) and
click on a stream name. On the stream detail page, on the "Overview" tab, you
can view all configured targets. You must configure new multistream targets for
each stream. This will apply the multistream configuration to that stream.
Multistream targets do not carry over when you create new streams.

To add a new target, select "Add" on the right side of the Multistream targets
section. You'll be asked to name your Target, provide the RTMP URL, and a stream
key. The RTMP URL and stream key should be provided to you by the platform that
you're streaming into. Select the renditions that you'd like to send to that
target. Click "Add Target". Once added, you can toggle the destinations and on
and off.

To edit a mulitstream target, click on the three dots to the left of the stream
name. Click "Edit target" to open up the target settings. Select "Update target"
when you've completed your changes.

To delete a multistream target, click on the three dots to the left of the
stream name and select "Delete target".

**_NOTE:_** Any changes to mulitstream targets, including adding new targets,
will apply to the next active session. If you make changes while a stream is
active, those changes will not apply until the current session has ended and a
new session begins.

# Managing Multistream targets with the Livepeer.com API

## Multistream Target Object `/api/multistream/target/*`

You can manage `Multistream Target` objects from the API. Each target represents
a specific endpoint where a stream could be multistreamed to.

<!-- Add notice about how other platforms call this? Re-stream, simulcast, etc -->

Notice that the existence of a `Multistream Target` object itself is not enough
for the multistream to happen. You also need to reference the target from the
`Stream` object that should be multistreamed, or just create the
`Multistream Target` inlined within the `Stream` object. Check the
[Stream Object](#stream-object-stream) section for more information.

### Create

##### Request: `POST /api/multistream/target`

```bash
curl -X POST \
-H 'content-type: application/json' \
-H 'authorization: Bearer {api-key}' \
-d '{
    "name": "Eli\'s Twitch",
    "url": "rtmp://rtmp.twitch.tv/live/SECRET"
}' \
'https://livepeer.com/api/multistream/target'
```

_Supported Protocols: RTMP, RTMPS and SRT._

##### Response

```json
{
  "id": "{id}",
  "userId": "USER123",
  "name": "Eli's Twitch",
  "url": "rtmp://rtmp.twitch.tv/live/SECRET"
}
```

### Read

You can fetch a specific `Multistream Target` with their ID, returned on the
creation request. The destination url will not be returned since it contains
sensitive user data. This way the application developer doesn't have to worry
about storing and securing their users' stream keys.

##### Request: `GET /api/multistream/target/{id}`

```bash
curl 'https://livepeer.com/api/multistream/target/{id}' \
-H 'authorization: Bearer {api-key}'
```

##### Response

```json
{
  "id": "{id}",
  "userId": "USER123",
  "name": "Eli's Twitch"
}
```

You can also list all existing `Multistream Targets` in the account by omitting
the `{id}` segment in the above request.

##### List Request: `GET /api/multistream/target`

```bash
curl 'https://livepeer.com/api/multistream/target' \
-H 'authorization: Bearer {api-key}'
```

The response is an array of `Multistream Target` objects, as returned from the
read API above. The pagination should be done exactly the same as the other
Livepeer list APIs.

### Update

You can change an existing target properties at will, and it will affect any
stream that is currently using it.

One of the updateable properties is the `disabled` field. It can be used to
disable multistreaming to a specific target without the need of removing them
from streams nor deleting the target completely.

Notice that changes will only take effect when the next stream session is
started.

##### Request: `PATCH /api/multistream/target/{id}`

```bash
curl -X PATCH \
-H 'content-type: application/json' \
-H 'authorization: Bearer {api-key}' \
-d '{
    "name": "Not Eli\'s Twitch",
    "url": "rtmp://rtmp.twitter.tv/live/SECRET"
    "disabled": true
}' \
'https://livepeer.com/api/multistream/target/{id}'
```

All request fields are optional. There is no response on a success (HTTP
`204 No Content`).

### Delete

Finally, you can also delete a `Multistream Target` object completely by calling
the delete API. You should not do this if any `Streams` are still referencing
that target or a broken reference will be left.

##### Request: `DELETE /api/multistream/target/{id}`

```bash
curl -X DELETE \
-H 'authorization: Bearer {api-key}'
'https://livepeer.com/api/multistream/target/{id}'
```

There is no response on a success (HTTP `204 No Content`).

---

## Stream Object: `/stream`

You can create a stream with a list of push targets referencing the transcoding
profiles.

```bash
curl -X POST \
-H 'content-type: application/json' \
-H 'authorization: Bearer {api-key}' \
-d '{
	  "name": "test_stream",
	  "profiles": [
	    {
	      "name": "720p",
	      "bitrate": 2000000,
	      "fps": 30,
	      "width": 1280,
	      "height": 720
	    },
	    {
	      "name": "480p",
	      "bitrate": 1000000,
	      "fps": 30,
	      "width": 854,
	      "height": 480
	    },
	    {
	      "name": "360p",
	      "bitrate": 500000,
	      "fps": 30,
	      "width": 640,
	      "height": 360
	    }
	  ],
    "multistream": {
      "targets":  [
        { "id" :"0bf161f3-95bd-4971-a7b1-4dcb5d39e78a", "profile": "720p" },
        { "id" :"0bf161f3-95bd-4971-a7b1-4dcb5d39e78b", "profile": "720p" },
        { "id" :"0bf161f3-95bd-4971-a7b1-4dcb5d39e78c", "profile": "480p" }
      ]
    }
}' \
https://livepeer.com/api/stream
```

You can update an existing stream to add multistream targets:

```bash
curl -X PATCH \
-H 'content-type: application/json' \
-H 'authorization: Bearer {api-key}' \
-d '{
     "multistream": {
        "targets":  [
          { "id": "PUSH123", "profile": "720p" }
          { "id": "PUSH444", "profile": "source" }
        ]
      }
    }' \
https://livepeer.com/api/stream/2d10f1fd-dbf7-495b-8aef-08916507fcce
```

Alternatively, you can create a stream with inline definition of multistream
targets:

```bash
curl -X POST \
-H 'content-type: application/json' \
-H 'authorization: Bearer {api-key}' \
-d '{
	  "name": "test_stream",
	  "profiles": [
	    {
	      "name": "720p",
	      "bitrate": 2000000,
	      "fps": 30,
	      "width": 1280,
	      "height": 720
	    },
	    {
	      "name": "480p",
	      "bitrate": 1000000,
	      "fps": 30,
	      "width": 854,
	      "height": 480
	    },
	    {
	      "name": "360p",
	      "bitrate": 500000,
	      "fps": 30,
	      "width": 640,
	      "height": 360
	    }
	  ],
    "multistream": {
      "targets": [
        {
          "profile": "source",
          "spec": {"url": "rtmp://rtmp.twitch.tv/live/SECRET"}
        },
        {
          "profile": "720p",
          "spec": {"url": "rtmp://rtmp.twitter.com/SECRET"}
        }
		  ]
    }
}' \
https://livepeer.com/api/stream
```

Inline definition also works with `PATCH` requests for updating the multistream
targets. This can help with adding and deleting multistream targets for a
specific stream.

# Understanding Multistream Performance

## Dashboard

While a session is active that has multistream targets configured, you'll be
able to see if a destination is "Active" or "Offline". **_NOTE:_** There may be
a slight delay between starting the stream and the push destinations connecting.
When starting to stream to multistream targets, use these indicators to
understand whether has connected to its target(s).

On the stream page where you've configured your multistream targets, select the
"Health" tab at the top. While a session is active, you'll see the ingest rate
of the source stream as well as ingest rate of any mulitstream targets.

## API

We have 3 webhooks to help you monitor how your mutlistream targets are
performing including:

`multistream.connected`

`multistream.error`

`multistream.disconnected`

For more information on how to use webhooks, please consult our
[Webhooks documentation](https://livepeer.com/docs/guides/start-live-streaming/webhook).
